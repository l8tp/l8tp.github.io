<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<!-- 设置视口宽度为设备宽度，初始缩放为1.0 -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" rev="stylesheet" href="css/style.css" type="text/css" />
		<title>美食</title>
	</head>
	<body>
		<div class="nb_body">
			<div class="nb_main">
				<ul class="FenLei" id="flei"> </ul><!-- 菜谱分类将会动态加载到这里 -->
				<embed id="mulu" src="item.html" type="image/svg+xml" /><!-- 嵌入头部网页 -->

				<div class="nb_are nb_smt"></div> <!-- 内容背景头部-->
				<div class="nb_are nb_cnt">
					<div class="mainLeft">
						<div id="soub"></div>
					</div> <!-- 插入左搜索框 -->
					<div class="mainRight">
						<div class="mainRightCenter" style="height:auto">
							<div class="Rrain" style="height:auto">
								<div class="ciel1" id="menus"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="nb_are nb_fot">
					<div class="copyRight">
						&nbsp; 知识共享&copy; 2024
					</div>
				</div>
			</div>
		</div>
		
		<script src="css/item.js"></script>
		
		<script>
			const param = new URLSearchParams(window.location.search);
			var grup = param.get("name"); //获取URL数据
			// 异步加载函数
			async function loadData(datalink) {
				// 1. 使用 Fetch API 获取数据
				const response = await fetch(datalink);
				// 2. 解析 JSON
				const data = await response.json();
				console.log('获取数据成功');
				// 3.加载刷新函数刷新数据
				updata(data);
			};
			loadData(datalink)

			//刷新函数
			function updata(data) {
				//结构布局
				var menus = document.getElementById("menus")
				menus.innerHTML = '<li><a style="margin: 0 0 0 auto;">ps:详情点击图片</a></li>'
				var number = 0;
				for (var menum in data) { //for in循环遍历
					if(grup == data[menum].group){
						
						var tito = data[menum].title //标题
						var imgo = '<img src="images/menuimg/' + data[menum].title + '.jpg">' //图片

						var conts = ""; //内容
						for (var i = 0; i < 2; i++) {
							conts += "<p>" + data[menum].content[i] + "</p>"
						}
						conts += "<p>……</p>"

						//模版字符串添加
						number++;
						menus.innerHTML +=
							`<ul><h1><a href="menu.html?name=${tito}">${number}.${tito}</a></h1><li>${conts}</li><a href="menu.html?name=${tito}">${imgo}</a></ul>`
					}
				}
				console.log(`已加载${number}条菜谱`)
			}
		</script>

		<script src="css/loadsearchhtml.js"></script>
		<script src="css/search.js"></script>

	</body>
</html>